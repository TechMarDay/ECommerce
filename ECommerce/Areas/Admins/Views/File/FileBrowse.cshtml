<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>File browse</title>
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/ckeditor/ckeditor.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var funcNum = @(Context.Request.Query["CKEditorFuncNum"] + ";");
            $('#fileExplorer').on('click', 'img', function () {
                var fileUrl = '/uploads/' + $(this).attr('title');
                window.opener.CKEDITOR.tools.callFunction(funcNum, fileUrl);
                window.close();
            }).hover(function () {
                $(this).css('cusor', 'pointer');
            });
        });
    </script>
</head>
<body>
    <div id="fileExplorer">
        @foreach (var fileInfo in ViewBag.fileInfos)
        {
            <div class="thumbnail">
                <img src="~/uploads/@fileInfo.Name" alt="thumb" title="@fileInfo.Name" width="100" height="200" />
                <br />
                @fileInfo.Name
            </div>
        }
    </div>
</body>
</html>